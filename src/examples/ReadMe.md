# Image Generation - Examples

In this example folder, there are two scripts and a notebook to demonstrate how the image generation pipeline works.

## Generate from scratch
This script (generatr_from_scratch.py) demonstrates how an image is generated by 
giving the five main parameters, layer height, layer width to height ratio, the over all (total) porosity, 
the foam porosity, and the output directory.
You can either run this script via your favorite IDE or via the command line, 
specifying the parameters with named argument e.g.

`Python generate_from_scratch.py -l 40 -r 1.5 -t 50 -f 30 -o path/to/output`

Apart from these specified parameters (which are called the UserConfig) there are a lot more parameters that should be 
set to fitting defaults in the Parameters class and which are subject to change during the iteration process.
You can of course change the defaults or initialize these by setting them explicitly after creation of the Parameters 
Object. This is explained in the script itself as well.    

The generation is an iterative process: an image is generated with the given parameters, the porosity is calculated, 
if the calculated porosity of the image does not match the desired porosity given, then the parameters are adapted and 
a new image is generated and so on until a matching image is successfully generated.
The process is a bit optimized, but since there is also a bit randomness involved in the generateion process
and there are many parameters, this may take a while, depending on parameter initialization and desired porosities.

Once a matching image is generated, it is saved as well as a configuration file (as json) with the parameters that were 
used to generate this image. The final porosities are also saved in this file.     
You can use this generated configuration file to look up the parameters used for this image generation and also to 
generate another image with the same parameters (it will look differently though based on the randomness used in the 
generation process) as explained next.

## Generate from config file
This script provides example code to load a config file that was saved in an earlier image generation. 
Based on this config file it will generate a new image with the same parameters.
Due to the randomness involved in the generation process, the new generated image will look differently.

The script can also be started either via your favorite IDE or the command line with specified arguments
for the config file and the output folder:

`Python generate_from_config_file.py -f path/to/config/file -o path/to/output
`
It is recommended to adapt the porosity-margin-parameters a bit (see script) if you don't want to save reiteration.
Based on the randomness, it might be that the same config leads to slightly different porosity percentages. 
Thus, if your allowed porosity margin is too small, the generation iteration will start until an image is found that matches the desired porosities.
